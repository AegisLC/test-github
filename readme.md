---

---
# 参数说明

## post参数：

### 总体的输入参数
文件路径，经度起点 经度终点  纬度起点 纬度终点 反潜设备标识符 参数 反潜设备标识符 参数 反潜设备标识符 参数 反潜设备标识符 参数.......... 是否使用垂直潜标 是否使用坐底潜标 是否使用拖曳声纳  
备注：输入的经纬度起点不能超过文件，文件输入暂时没有动态，默认北海，待修改（已留）
### 各种反潜设备参数：
即(反潜设备标识符，参数)这一部分
* 反潜设备是垂直潜标时的参数：0 垂直潜标的经度 垂直潜标的纬度 垂直潜标阵列第一个阵元放置的深度 阵元间隔 阵元数量 是否使用毛发阵  
* 反潜设备是坐底潜标时的参数：1 坐底潜标的经度 坐底潜标的纬度 坐底潜标深度  
* 反潜设备是水面舰艇时的参数：2 参数如下
#### 水舰艇搜索战术参数
如果是水面舰艇，则第一个输入的反潜设备标识符为2  
第二个参数表示水面舰艇四种搜索战术：0表示单舰往返，1表示平行搜索，2表示8字型搜索，3表示不规则搜索  
* 单舰往返的参数：航速，拖曳声呐第一个阵元深度，阵元间隔，阵元数量，起点，终点，间隔时间 
* 平行搜索的参数：航速，拖曳声呐第一个阵元深度，阵元间隔，阵元数量，起点，终点，l1长度，l2的数量，间隔时间(起点终点在相同纬度上)  
* 8字型搜索的参数：航速，拖曳声呐第一个阵元深度，阵元间隔，阵元数量，左下点，左上点，右下点，右上点，间隔时间   
* 不规则搜索：航速，拖曳声呐第一个阵元深度，阵元间隔，阵元数量，起点，间隔时间
##### 备注：   
1. 间隔时间n：在水面舰艇巡逻的路线内，每隔n小时生成一次风险数据。在每个路线中设置完起点和终点以及舰艇速度后，整条路线会有一个总的时间，比如单舰往返需要10个小时走完全程，则间隔时间设为1小时的话，则在10个点处生成风险数据。   
2. l1长度，l2的数量(解释)：     
![img.png](img.png)   
l1为平行搜索中竖线的长度，l2为为横线的数量，如图中为5个。  
3. 八字型搜索的四个点，即下图中的左下角点，左上角点，右下角点，右上角点  
![img_1.png](img_1.png)  
4.支持潜标和水面舰艇的综合对抗风险，同时只支持单个水面舰艇，取最后一个巡逻路线。


### 例子
#### post的格式是：    
```
"""
    {
        "param1":[文件路径 经度起点 经度终点  纬度起点 纬度终点 反潜设备标识符 参数 是否使用垂直潜标 是否使用坐底潜标 是否使用拖曳声纳]
    }
"""
```
#### 测试单个垂直潜标

```
"""
    {
        "param1":["./dataset/North_sea_dataset_35-36_122-124.nc",122, 123.9, 35, 35.9, 0, 122.2, 35.5, 30, 1.5, 15, 1, 1, 0, 0]
    }
"""
```
#### 测试多个垂直潜标
```
"""
    {
        "param1":["./dataset/North_sea_dataset_35-36_122-124.nc",122, 123.9, 35, 35.9, 0, 122.2, 35.5, 30, 1.5, 15, 1, 0, 122.5, 35, 100, 1.5, 15, 0, 1, 0, 0]
    }
"""
```
#### 测试垂直潜标和坐底潜标综合
```
"""
    {
        "param1":["./dataset/North_sea_dataset_35-36_122-124.nc",122, 123.9, 35, 35.9, 0, 122.2, 35.5, 30, 1.5, 15, 1, 0, 122.5, 35, 100, 1.5, 15, 0, 1, 122.9, 35.5, 500, 1, 1, 0]
    }
"""
```



#### 测试水面舰艇

* 单舰往返
```
    {
        "param1":["./dataset/North_sea_dataset_35-36_122-124.nc",122, 123.9, 35, 35.9, 2, 0, 30 ,30, 1, 100,  [122, 35.5], [123.5, 35.5],0.25,0, 0, 1]
    }
```

* 8字型搜索
```
    {
        "param1":["./dataset/North_sea_dataset_35-36_122-124.nc",122, 123.9, 35, 35.9, 2, 2,30, 30,1, 100, [122.1, 35], [122.1, 35.8], [123.8, 35], [123.8, 35.8], 0.25, 0, 0, 1]
    }
```
* 不规则搜索
```
    {
        "param1":["./dataset/North_sea_dataset_35-36_122-124.nc",122, 123.9, 35, 35.9, 2, 3,30,30, 1, 100,[122.1, 35.5], 0.25, 0, 0, 1]
    }
```
* 平行搜索
```
    {
        "param1":["./dataset/North_sea_dataset_35-36_122-124.nc",122, 123.9, 35, 35.9, 2, 1, 30, 30, 1, 100,  [122, 35.1], [123.5, 35.1], 50, 5, 0.25, 0, 0, 1]
    }
```
* 三种装备综合(两个垂直潜标一个坐底潜标)
```
    {
        "param1":["./dataset/North_sea_dataset_35-36_122-124.nc",122, 123.9, 35, 35.9, 0, 122.2, 35.5, 30, 1.5, 15, 1, 0,
              122.5, 35, 100, 1.5, 15, 0, 1, 122.9, 35.5, 300, 2, 3,30,30, 1, 100,  [122.1, 35.5], 0.25, 1, 1, 1]
    }
```

#### 输出

返回两个列表
一个四维列表的综合风险值 ：第一个维度为时间，第二个维度为纬度，第三个维度是经度，第四个维度深度，结果的精度为输入数据文件的精度，目前应该为1/12，即一个经纬度有12*12个数据点
一个路径点的列表：如果装备有水面舰艇，返回水面舰艇巡逻的路径点的经纬度，长度是n个时刻，每个列表元素是一个元组为每个时刻的经纬度点(经度，纬度)


##### to:LY
保存四种文件
- total_file
  + 路径文件JT_path.npy:水面舰艇每个时刻的路径点
  + 风险文件result.npy:综合风险值文件，格式：四维：时刻*纬度*经度*深度。时刻与路径对应
  + 风险图plot：目前生成每个时刻的第一层风险图
- JT
  + 水面舰艇搜索路线图


